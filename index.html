<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BTC Tracker</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600&display=swap" rel="stylesheet">
    <script>
      // Prevent flash of unstyled content (FOUC)
      (function() {
        const stored = localStorage.getItem('btc-tracker:theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = stored || (systemDark ? 'dark' : 'light');
        document.documentElement.classList.add(theme);
      })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Configure Tailwind AFTER loading it
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              'card-bg': '#fefefe',
              'card-border': '#eeeeee',
              'nav-bg': '#fefefe',
              'nav-border': '#eeeeee',
            },
            fontFamily: {
              'sans': ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'Noto Sans', 'sans-serif'],
            }
          }
        }
      }
    </script>
    <style>
      /* CSS Variables for theme support */
      :root {
        --color-bg-page: #fef3e2;
        --color-bg-card: #fefefe;
        --color-border-card: #eeeeee;
        --color-text-primary: #0f172a;
        --color-text-secondary: #1f2937;
        --color-text-tertiary: #6b7280;
        --color-nav-bg: #fefefe;
        --color-nav-border: #eeeeee;
        --gradient-page: linear-gradient(to bottom right, #fef3e2, #dbeafe);
      }
      .dark {
        --color-bg-page: #111827;
        --color-bg-card: #1f2937;
        --color-border-card: #374151;
        --color-text-primary: #f9fafb;
        --color-text-secondary: #d1d5db;
        --color-text-tertiary: #9ca3af;
        --color-nav-bg: #1f2937;
        --color-nav-border: #374151;
        --gradient-page: linear-gradient(to bottom right, #111827, #1f2937);
      }

      /* Component Classes */
      .card-base {
        background-color: var(--color-bg-card);
        border-color: var(--color-border-card);
        color: var(--color-text-primary);
      }
      
      .card-header {
        color: var(--color-text-primary);
      }
      
      .card-label {
        color: var(--color-text-secondary);
      }
      
      .card-value {
        color: var(--color-text-primary);
      }
      
      .card-value-small {
        color: var(--color-text-primary);
      }
      
      .nav-base {
        background-color: var(--color-nav-bg);
        border-color: var(--color-nav-border);
      }
      
      .page-container {
        background: var(--gradient-page);
      }

      /* Ensure headers have proper contrast in light mode */
      .card-base h2,
      .card-base .card-header {
        color: var(--color-text-primary) !important;
      }
      
      /* Force dark text in light mode for better contrast */
      :not(.dark) .card-base h2,
      :not(.dark) .card-base .card-header {
        color: #0f172a !important;
      }

      /* Fix specific text contrast issues in light mode */
      :not(.dark) .text-gray-800 {
        color: #0f172a !important;
      }
      
      /* Ensure all text with gray-800 class is dark in light mode */
      :not(.dark) span.text-gray-800 {
        color: #0f172a !important;
      }

      /* Fix navbar link contrast in light mode */
      :not(.dark) .text-gray-700 {
        color: #374151 !important;
      }
      
      /* Make navbar links even darker for better readability */
      :not(.dark) nav .text-gray-700 {
        color: #1f2937 !important;
      }

      /* Comprehensive dark mode text contrast fixes */
      .dark .text-gray-800,
      .dark span.text-gray-800,
      .dark h1.text-gray-800,
      .dark h2.text-gray-800,
      .dark h3.text-gray-800 {
        color: #f9fafb !important;
      }
      
      .dark .card-base h2,
      .dark .card-base h3,
      .dark .card-base .card-header {
        color: #f9fafb !important;
      }
      
      /* Fix specific Bitcoin price and chart headers in dark mode */
      /* Exception: Don't override gradient text */
      .dark .text-2xl.font-bold:not(.text-transparent),
      .dark .text-xl.font-bold:not(.text-transparent),
      .dark .text-lg.font-bold:not(.text-transparent) {
        color: #f9fafb !important;
      }
      
      /* Comprehensive dark mode navigation link contrast fixes */
      .dark nav .text-gray-700,
      .dark nav a.text-gray-700 {
        color: #d1d5db !important;
      }
      
      /* Ensure hover states maintain proper contrast */
      .dark nav .text-gray-700:hover,
      .dark nav a.text-gray-700:hover {
        color: #3b82f6 !important; /* blue-500 */
      }
      
      /* Fix Upload Transaction Files header specifically */
      .dark .text-lg.font-bold.text-gray-800,
      .dark .text-xl.font-bold.text-gray-800 {
        color: #f9fafb !important;
      }

      /* Logo Enhancement - Shine Animation */
      @keyframes logo-shine {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(30deg);
          opacity: 0;
        }
        50% {
          opacity: 0.6;
        }
        100% {
          transform: translateX(100%) translateY(100%) rotate(30deg);
          opacity: 0;
        }
      }

      .logo-container::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        animation: logo-shine 4s ease-in-out infinite;
        animation-delay: 2s;
        pointer-events: none;
        z-index: 1;
      }

      /* Default shimmer - light mode enhanced */
      .logo-container::before {
        background: linear-gradient(
          45deg,
          transparent 0%,
          transparent 30%,
          rgba(255, 255, 255, 0.3) 45%,
          rgba(255, 255, 255, 0.5) 48%,
          rgba(255, 255, 255, 0.6) 50%,
          rgba(255, 255, 255, 0.5) 52%,
          rgba(255, 255, 255, 0.3) 55%,
          transparent 70%,
          transparent 100%
        );
      }

      /* Dark mode shimmer override - very subtle */
      .dark .logo-container::before {
        background: linear-gradient(
          45deg,
          transparent 0%,
          transparent 30%,
          rgba(255, 255, 255, 0.01) 45%,
          rgba(255, 255, 255, 0.02) 48%,
          rgba(255, 255, 255, 0.03) 50%,
          rgba(255, 255, 255, 0.02) 52%,
          rgba(255, 255, 255, 0.01) 55%,
          transparent 70%,
          transparent 100%
        ) !important;
      }

      /* Enhance shine on hover */
      .logo-container:hover::before {
        animation-duration: 2s;
      }

      /* Force light mode logo container transparency */
      :not(.dark) .logo-container {
        background-color: rgba(255, 255, 255, 0.35) !important;
        border-color: rgba(229, 231, 235, 0.25) !important;
      }
      
      :not(.dark) .logo-container:hover {
        border-color: rgba(209, 213, 219, 0.4) !important;
      }

      /* Dark mode logo container - more transparent background */
      .dark .logo-container {
        background-color: rgba(31, 41, 55, 0.15) !important;
        border-color: rgba(55, 65, 81, 0.25) !important;
      }
      
      .dark .logo-container:hover {
        border-color: rgba(55, 65, 81, 0.4) !important;
      }

      /* TimeRangeSelector dropdown styling */
      select {
        color: var(--color-text-primary) !important;
        background-color: var(--color-bg-card) !important;
        border-color: var(--color-border-card) !important;
      }
      
      select option {
        color: var(--color-text-primary) !important;
        background-color: var(--color-bg-card) !important;
      }

      /* Ensure dropdown works properly in both themes */
      html:not(.dark) select {
        background-color: white !important;
        color: #111827 !important;
        border-color: #d1d5db !important;
      }
      
      html:not(.dark) select option {
        background-color: white !important;
        color: #111827 !important;
      }
      
      html.dark select {
        background-color: #1f2937 !important;
        color: #f9fafb !important;
        border-color: #4b5563 !important;
      }
      
      html.dark select option {
        background-color: #1f2937 !important;
        color: #f9fafb !important;
      }

      /* Base styles */
      body {
        background-color: var(--color-bg-page);
        color: var(--color-text-primary);
        transition: all 0.2s ease-in-out;
      }

      /* Fix form elements contrast in light mode - Ultra specific selectors for all browsers */
      html:not(.dark) body .tax-year-select,
      html:not(.dark) body .tax-input,
      html:not(.dark) body select,
      html:not(.dark) body input[type="number"],
      html:not(.dark) body input[type="text"],
      html:not(.dark) select,
      html:not(.dark) input {
        background-color: white !important;
        background: white !important;
        color: #1f2937 !important;
        border-color: #d1d5db !important;
        -webkit-appearance: none !important;
        -moz-appearance: none !important;
        appearance: none !important;
      }
      
      html:not(.dark) body .tax-year-select option,
      html:not(.dark) body select option,
      html:not(.dark) select option,
      html:not(.dark) option {
        background-color: white !important;
        background: white !important;
        color: #1f2937 !important;
      }

      /* Override any Tailwind classes specifically */
      html:not(.dark) .bg-gray-700,
      html:not(.dark) .dark\:bg-gray-700 {
        background-color: white !important;
        background: white !important;
      }
      
      html:not(.dark) .text-gray-100,
      html:not(.dark) .dark\:text-gray-100 {
        color: #1f2937 !important;
      }

      /* Firefox-specific overrides */
      @-moz-document url-prefix() {
        html:not(.dark) select {
          background-color: white !important;
          color: #1f2937 !important;
          border-color: #d1d5db !important;
        }
        
        html:not(.dark) option {
          background-color: white !important;
          color: #1f2937 !important;
        }
      }

      /* Ensure dark mode form elements work properly */
      html.dark body .tax-year-select,
      html.dark body .tax-input,
      html.dark body select,
      html.dark body input[type="number"],
      html.dark body input[type="text"] {
        background-color: #374151 !important;
        background: #374151 !important;
        color: #f9fafb !important;
        border-color: #4b5563 !important;
      }
      
      html.dark body .tax-year-select option,
      html.dark body select option {
        background-color: #374151 !important;
        background: #374151 !important;
        color: #f9fafb !important;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
